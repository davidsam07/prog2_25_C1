<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Gestión de Tareas</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet"
          href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
<div class="container mt-4">
    <h1>Gestión de Tareas</h1>

    <!-- Formulario para crear tarea -->
    <form method="post" action="/crear" class="form-inline mb-3">
        <input type="text" name="titulo" class="form-control mr-2" placeholder="Título" required>
        <input type="text" name="descripcion" class="form-control mr-2" placeholder="Descripción">
        <input type="text" name="fecha" class="form-control mr-2" placeholder="YYYY-MM-DD" value="2025-05-30">
        <select name="prioridad" class="form-control mr-2">
            <option value="1">Alta</option>
            <option value="2" selected>Media</option>
            <option value="3">Baja</option>
        </select>
        <input type="text" name="usuario" class="form-control mr-2" placeholder="Usuario asignado">
        <button type="submit" class="btn btn-primary">Crear</button>
    </form>

    <!-- Botón para ver filtradas o modificadas -->
    <a href="/filtrar?estado=pendiente" class="btn btn-sm btn-info mb-2">Ver Pendientes</a>
    <a href="/filtrar?estado=en_progreso" class="btn btn-sm btn-info mb-2">Ver En Progreso</a>
    <a href="/filtrar?estado=completada" class="btn btn-sm btn-info mb-2">Ver Completadas</a>

    <!-- Lista de tareas -->
    <ul class="list-group">
    {% for t in tareas %}
      <li class="list-group-item">
        <strong>{{ t.id_tarea }}:</strong> {{ t }}
        <br/>
        {% if t.usuario_asignado %}
          <em>Asignada a: {{ t.usuario_asignado }}</em>
        {% endif %}
        <br/>
        <a href="/cambiar_estado?id={{ t.id_tarea }}&estado=en_progreso" class="btn btn-sm btn-warning">En Progreso</a>
        <a href="/cambiar_estado?id={{ t.id_tarea }}&estado=completada" class="btn btn-sm btn-success">Completar</a>
        <a href="/modificar?id={{ t.id_tarea }}" class="btn btn-sm btn-secondary">Modificar</a>
        <a href="/asignar?id={{ t.id_tarea }}&usuario=David" class="btn btn-sm btn-info">Asignar a David</a>
      </li>
    {% endfor %}
    </ul>
</div>
</body>
</html>
<li class="list-group-item">
  <strong>{{ t.id_tarea }}:</strong> {{ t }}
  <br>
  <em>Asignada a: {{ t.usuario_asignado }}</em>
  <br>
  <a href="/cambiar_estado?id={{ t.id_tarea }}&estado=en_progreso" class="btn btn-sm btn-warning">En Progreso</a>
  <a href="/cambiar_estado?id={{ t.id_tarea }}&estado=completada" class="btn btn-sm btn-success">Completar</a>
  <a href="/modificar?id={{ t.id_tarea }}" class="btn btn-sm btn-secondary">Modificar</a>
  <a href="/asignar?id={{ t.id_tarea }}&usuario=Maria" class="btn btn-sm btn-info">Asignar a Maria</a>

  <!-- Nuevo botón "Eliminar" -->
  <a href="/eliminar?id={{ t.id_tarea }}" class="btn btn-sm btn-danger">Eliminar</a>
</li>
